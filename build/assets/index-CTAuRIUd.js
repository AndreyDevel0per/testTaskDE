var S=Object.defineProperty;var q=r=>{throw TypeError(r)};var B=(r,e,t)=>e in r?S(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var l=(r,e,t)=>B(r,typeof e!="symbol"?e+"":e,t),A=(r,e,t)=>e.has(r)||q("Cannot "+t);var y=(r,e,t)=>(A(r,e,"read from private field"),t?t.call(r):e.get(r)),f=(r,e,t)=>e.has(r)?q("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),C=(r,e,t,i)=>(A(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t),b=(r,e,t)=>(A(r,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();const n=class n{constructor(){if(n.instance)return n.instance;n.instance=this}validateForm({form:e,isNeedShowErrors:t=!0}){let i=!0;return Array.from(e.elements).forEach(s=>{const a=s.getAttribute(n.attrs.inputRequired);if(!a)return;this.getValidationInput(a,s.value)?this.clearError(s):(i=!1,t&&this.displayError(s,a))}),i}getValidationInput(e,t){switch(e){case"email":return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t);case"phone":return/^\+?\d{1,4}?[-.\s]?(\(?\d{1,4}?\))?[-.\s]?\d{1,4}[-.\s]?\d{1,9}$/.test(t);case"text":return t.trim().length>0;default:return!0}}displayError(e,t){const i=e.closest(`[${n.attrs.validationContainer}]`);if(!i){console.warn("Не найден контейнер для отображения ошибок для элемента",e);return}let s=i.querySelector(`[${n.attrs.errorMsg}]`);s||(s=document.createElement("div"),s.setAttribute(n.attrs.errorMsg,""),i.appendChild(s)),s.textContent=`Поле ${t} заполнено некорректно`,i.classList.add(n.stateClasses.error)}clearError(e){const t=e.closest(`[${n.attrs.validationContainer}]`);if(!t)return;const i=t.querySelector(`[${n.attrs.errorMsg}]`);i&&(i.textContent=""),t.classList.remove(n.stateClasses.error)}};l(n,"attrs",{inputRequired:"data-js-input-required",validationContainer:"data-js-validation-container",errorMsg:"data-js-validation-error-message"}),l(n,"stateClasses",{error:"error"});let $=n;var g,v,m;const o=class o{constructor(){return o.instance||(o.instance=this),o.instance}static lock(){C(o,m,!0),document.documentElement.style.setProperty(y(o,g),-1*document.documentElement.scrollTop+"px"),C(o,v,document.documentElement.scrollTop),document.documentElement.classList.add(o.stateClasses.noscroll)}static unlock(){C(o,m,!1),document.documentElement.classList.remove(o.stateClasses.noscroll),window.scrollTo(0,y(o,v)),document.documentElement.style.removeProperty(y(o,g))}get isLocked(){return y(o,m)}};g=new WeakMap,v=new WeakMap,m=new WeakMap,f(o,g,"--st"),f(o,v,0),f(o,m,!1),l(o,"instance"),l(o,"stateClasses",{noscroll:"noscroll"});let E=o;var h,O,N;const c=class c{constructor(){f(this,h);l(this,"attrs",{modal:"data-js-modal",button:"data-js-modal-button",closeButton:"data-js-modal-close"});if(c.instance)return c.instance;this.currentModal=null,b(this,h,N).call(this),c.instance=this}openModal(e){const t=document.querySelector(`[${this.attrs.modal}="${e}"]`);t&&(t.classList.replace(c.stateClasses.close,c.stateClasses.open),E.lock(),this.currentModal=t)}closeModal(){this.currentModal.classList.replace(c.stateClasses.open,c.stateClasses.close),E.unlock()}};h=new WeakSet,O=function(e){const{target:t}=e;if(t.hasAttribute(`${this.attrs.button}`)){const s=t.getAttribute(this.attrs.button);this.openModal(s);return}if(t.hasAttribute(this.attrs.closeButton)){const s=t.closest(`[${this.attrs.modal}]`);s&&this.closeModal(s);return}const i=t.closest(`[${this.attrs.modal}]`);i&&t===i&&this.closeModal(i)},N=function(){document.addEventListener("click",e=>{b(this,h,O).call(this,e)})},l(c,"instance"),l(c,"stateClasses",{open:"visible",close:"hidden"});let w=c;var p,T,x;const d=class d{constructor(){f(this,p);l(this,"attrs",{form:"data-js-form",needValidation:"data-js-form-validation-required"});if(d.instance)return d.instance;b(this,p,x).call(this),this.modalManager=new w,this.formValidator=new $,d.instance=this}static getInstance(){return d.instance||(d.instance=new d),d.instance}isNeedValidation(e){return!!e.hasAttribute(this.attrs.needValidation)}};p=new WeakSet,T=function(e){const{target:t,submitter:i}=e;if(!t.hasAttribute(`${this.attrs.form}`)||!t.tagName.toLowerCase()==="form")return;const s=JSON.parse(t.getAttribute(this.attrs.form)),{url:a,method:u="POST",showModalAfterSuccess:V,showModalAfterError:I,isAjaxForm:D=!0,redirectUrlAfterSuccess:M=!1,delayBeforeRedirect:P=!1}=s,R=new FormData(t);D&&e.preventDefault(),!(this.isNeedValidation(t)&&!this.formValidator.validateForm({form:t}))&&(i.disabled=!0,fetch(a,{method:u,body:R}).then(j=>{t.reset(),j.ok?V&&(this.modalManager.closeModal(),this.modalManager.openModal(V)):(this.modalManager.closeModal(),this.modalManager.openModal(I)),M&&(P?setTimeout(()=>{location.href=M},P):location.href=M)}).finally(()=>{i.disabled=!1}))},x=function(){document.addEventListener("submit",e=>{b(this,p,T).call(this,e)},!0)},l(d,"instance");let L=d;function F(){return new Promise(r=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r):r()})}Promise.resolve(F()).then(()=>{new L,new w});
